(function(e){function z(l,f,b){function m(l){p=1;r.trigger(h+":fetch");e.getJSON(c+"?callback=?",j).always(function(){p=0}).fail(function(){g=setTimeout(m,2E3)}).done(function(c){var f=c.results||c;if(f.length){for(var f=f.slice(0,b.limit),c=[],k=[],n,q,j=0;j<f.length;j++){var a=f[j],s=a.retweeted_status?a.retweeted_status.user:a.user;a.author=a.from_user||s.screen_name;a.name=a.from_user_name||s.name;a.author_url="http://twitter.com/"+a.author;var p=a,d;if(b.linkify){d=a.text;for(var t=[/[\@]+([A-Za-z0-9_\-]+)/gi,
/(?:^| )[\#]+([A-Za-z0-9\-_]+)/gi,/((ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?)/g],u=['<a href="http://twitter.com/$1">@$1</a>',' <a href="http://twitter.com/search?q=%23$1">#$1</a>','<a href="$1">$1</a>'],v=t.length;0<v;)d=d.replace(t[--v],u[v])}else d=a.text;p.tweet=d;a.tweet_url="http://twitter.com/"+a.author+"/statuses/"+a.id_str;a.date=Date.parse(a.created_at.replace(/^([a-z]{3})( [a-z]{3} \d\d?)(.*)( \d{4})$/i,"$1,$2$4$3"));p=a;d=Math.abs(parseInt((+new Date-
a.date)/1E3,10));t="";t=60>d?d+" seconds ago":120>d?"a minute ago":2700>d?parseInt(d/60,10)+" minutes ago":7200>d?"an hour ago":86400>d?parseInt(d/3600,10)+" hours ago":172800>d?"a day ago":parseInt(d/86400,10)+" days ago";p.time=t;a.avatar_url=a.profile_image_url||s.profile_image_url;a.avatar_mini_url=a.avatar_url.replace(/_normal/gi,"_mini");a.avatar_bigger_url=a.avatar_url.replace(/_normal/gi,"_bigger");a.avatar='<img src="'+a.avatar_url+'" alt="'+a.author+"'s avatar\" />";a.avatar_mini='<img src="'+
a.avatar_mini_url+'" alt="'+a.author+"'s avatar\" />";a.avatar_bigger='<img src="'+a.avatar_bigger_url+'" alt="'+a.author+"'s avatar\" />";s=e(b.template.replace(/\{\{ ?([a-z_]+) ?\}\}/gi,function(b,c){return a[c]}))[0];a.date>w?k.push(s):c.push(s);j||(q=a.date,n="author"!==i.type?!1:{username:a.author,name:a.user.name,url:a.author_url,description:a.user.description,website:a.user.url,followers:a.user.followers_count,avatar_url:a.avatar_url,avatar_mini_url:a.avatar_mini_url,avatar_bigger_url:a.avatar_bigger_url,
avatar:a.avatar,avatar_mini:a.avatar_mini,avatar_bigger:a.avatar_bigger,last_tweet:a,location:a.user.location,tweets:a.user.statuses_count,following:a.user.friends_count})}w=q;x&&(x=0);q=e(k);c=q.add(c);q.hide();c.appendTo(r.empty());q.fadeIn(1E3);r.trigger(h+":load",[c,q,n])}0<b.refreshInterval&&!l&&(g=setTimeout(m,1E3*b.refreshInterval))})}var u=this,r=e(l),i={},g=0,w=0,p=0,x=1,c,j,y;this.pause=function(){g?g=clearTimeout(g):b.refreshInterval&&m()};this.resume=function(){!g&&(g=setTimeout(m,1E3*
b.refreshInterval))};this.refresh=function(){p||(g&&clearTimeout(g),m(1))};this.destroy=function(){clearTimeout(g);e.removeData(l,k);r.unbind("."+k).html(y)};y=r.html();var n=0,i=null!==(n=/^@([a-z0-1._\-]+)$/i.exec(f))?{type:"author",author:n[1]}:null!==(n=/^@([a-z0-1._\-]+)\/([a-z0-1._\-]+)$/i.exec(f))?{type:"list",author:n[1],list:n[2]}:{type:"search",search:f};c="https:"===document.location.protocol?"https://":"http://";switch(i.type){case "author":c+="api.twitter.com/1/statuses/user_timeline.json";
j={include_rts:b.retweets,screen_name:i.author,count:b.limit+(!b.retweets||!b.replies?b.amend:0),exclude_replies:!b.replies};break;case "list":c+="api.twitter.com/1/lists/statuses.json";j={page:1,include_rts:b.retweets,slug:i.list,owner_screen_name:i.author,per_page:b.limit};break;default:c+="search.twitter.com/search.json",j={q:i.search,rpp:b.limit}}b.refresh&&r.bind("mouseenter."+k+" mouseleave."+k,function(b){u["mouseenter"===b.type?"pause":"resume"]()});m()}var h="tweed",k="plugin_"+h;e.fn[h]=
function(l,f){var b=!1===l?"destroy":l,m=Array.prototype.slice.call(arguments,1),u=e.isPlainObject(f)?e.extend({},e.fn[h].defaults,f):e.fn[h].defaults;return this.each(function(f,i){var g=e.data(i,k),h=g||e.data(i,k,new z(i,l,u));g&&e.isFunction(h[b])&&h[b].apply(h,m)})};e.fn[h].defaults={limit:5,retweets:!0,replies:!1,amend:10,linkify:!0,refreshInterval:0,pauseOnHover:0,template:'<li><span class="text">{{tweet}}</span><br><a href="{{author_url}}" class="author">{{author}}</a> <a href="{{tweet_url}}" class="time">{{time}}</a></li>'}})(jQuery);
